<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V치no캜n칤 Plinko</title>
    <style>
        body {
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: linear-gradient(to bottom, #1a2a6c, #b21f1f);
            font-family: Arial, sans-serif;
            color: white;
            overflow: hidden;
        }

        #game-container {
            position: relative;
            width: 1000px;
            height: 800px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin-top: 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .pin {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #fff;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }

        .present {
            position: absolute;
            width: 30px;
            height: 30px;
            background: none;
            font-size: 24px;
            text-align: center;
            line-height: 30px;
            user-select: none;
            z-index: 2;
        }

        .slot {
            position: absolute;
            bottom: 0;
            height: 60px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
        }

        #drop-button {
            margin: 20px;
            padding: 15px 30px;
            font-size: 24px;
            background: #ff4444;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        #drop-button:hover {
            transform: scale(1.05);
            background: #ff6666;
        }

        .score {
            font-size: 32px;
            margin: 20px;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .value-buttons {
            display: flex;
            gap: 10px;
            margin: 10px;
        }

        .value-button {
            padding: 10px 20px;
            font-size: 18px;
            background: #4444ff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .value-button:hover {
            transform: scale(1.05);
            background: #6666ff;
        }

        .value-button.selected {
            background: #8888ff;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <div class="score">Body: <span id="score">1000</span></div>
    <div class="value-buttons">
        <button class="value-button selected" data-value="100">100 bod콢</button>
        <button class="value-button" data-value="500">500 bod콢</button>
        <button class="value-button" data-value="1000">1000 bod콢</button>
    </div>
    <button id="drop-button">Pustit d치rek 游꾸</button>
    <div id="game-container"></div>

    <script>
        const container = document.getElementById('game-container');
        const dropButton = document.getElementById('drop-button');
        const scoreElement = document.getElementById('score');
        const valueButtons = document.querySelectorAll('.value-button');
        let score = 1000;
        let selectedValue = 100;
        scoreElement.textContent = score;

        // V칳b캩r hodnoty d치rku
        valueButtons.forEach(button => {
            button.addEventListener('click', () => {
                valueButtons.forEach(btn => btn.classList.remove('selected'));
                button.classList.add('selected');
                selectedValue = parseInt(button.dataset.value);
                updateDropButton();
            });
        });

        function updateDropButton() {
            dropButton.textContent = `Pustit d치rek 游꾸 (-${selectedValue} bod콢)`;
        }
        updateDropButton();

        // Vytvo콏en칤 v캩t코칤 pyramidy s te캜kami
        const rows = 12;
        const presents = ['游꾸', '游꾻', '游꾼', '游붋'];

        for (let i = 0; i < rows; i++) {
            const pinsInRow = i + 1;
            const spacing = 70; // Men코칤 mezera mezi piny pro v칤ce pin콢
            const rowWidth = spacing * (pinsInRow - 1);
            const startX = (container.offsetWidth - rowWidth) / 2;

            for (let j = 0; j < pinsInRow; j++) {
                const pin = document.createElement('div');
                pin.className = 'pin';
                pin.style.left = `${startX + j * spacing}px`;
                pin.style.top = `${150 + i * 50}px`; // Men코칤 vertik치ln칤 mezera
                container.appendChild(pin);
            }
        }

        // Vytvo콏en칤 slot콢 - hodnoty jsou nyn칤 n치sobitele
        const slotValues = [0.5, 0.8, 1.2, 1.5, 2, 3, 2, 1.5, 1.2, 0.8, 0.5];
        slotValues.forEach((value, index) => {
            const slot = document.createElement('div');
            slot.className = 'slot';
            slot.textContent = `x${value}`;
            const slotWidth = container.offsetWidth / slotValues.length;
            slot.style.left = `${index * slotWidth}px`;
            slot.style.width = `${slotWidth}px`;
            container.appendChild(slot);
        });

        function createPresent() {
            if (score < selectedValue) {
                alert(`Nem치te dostatek bod콢! Pot콏ebujete ${selectedValue} bod콢.`);
                return;
            }

            score -= selectedValue;
            scoreElement.textContent = score;

            const present = document.createElement('div');
            present.className = 'present';
            present.textContent = presents[Math.floor(Math.random() * presents.length)];
            present.style.left = `${container.offsetWidth / 2}px`;
            present.style.top = '0px';
            container.appendChild(present);

            let posX = parseFloat(present.style.left);
            let posY = 0;
            let velocityX = (Math.random() - 0.5) * 1.5; // V캩t코칤 po캜치te캜n칤 rychlost
            let velocityY = 0;

            function animate() {
                velocityY += 0.2;
                posY += velocityY;
                posX += velocityX;

                // Slab코칤 p콏itahov치n칤 ke st콏edu
                const centerX = container.offsetWidth / 2;
                const pullToCenter = (centerX - posX) * 0.0002; // Zmen코eno z 0.0005
                velocityX += pullToCenter;

                // Kolize s piny
                const pins = document.querySelectorAll('.pin');
                pins.forEach(pin => {
                    const pinX = parseFloat(pin.style.left);
                    const pinY = parseFloat(pin.style.top);
                    const dx = posX - pinX;
                    const dy = posY - pinY;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < 20) {
                        velocityX = dx * 0.18; // Siln캩j코칤 odraz do stran
                        velocityY = Math.abs(velocityY) * 0.8;
                        posY = pinY - 20;
                    }
                });

                // Hranice kontejneru
                if (posX < 0 || posX > container.offsetWidth - 30) {
                    velocityX *= -0.5; // Siln캩j코칤 odraz od st캩n
                    velocityX += (centerX - posX) * 0.0005;
                    posX = posX < 0 ? 0 : container.offsetWidth - 30;
                }

                // Dopad do slotu
                if (posY > container.offsetHeight - 60) {
                    const slotIndex = Math.floor(posX / (container.offsetWidth / slotValues.length));
                    if (slotIndex >= 0 && slotIndex < slotValues.length) {
                        // N치soben칤 hodnoty d치rku (ne celkov칠ho sk칩re)
                        const winnings = Math.floor(selectedValue * slotValues[slotIndex]);
                        score += winnings;
                        scoreElement.textContent = score;
                        
                        // Zobrazen칤 animace v칳hry
                        const multiplierText = document.createElement('div');
                        multiplierText.style.position = 'absolute';
                        multiplierText.style.left = `${posX}px`;
                        multiplierText.style.top = `${container.offsetHeight - 100}px`;
                        multiplierText.style.color = '#ffff00';
                        multiplierText.style.fontSize = '32px';
                        multiplierText.style.fontWeight = 'bold';
                        multiplierText.style.zIndex = '3';
                        multiplierText.textContent = `+${winnings}`;
                        container.appendChild(multiplierText);
                        
                        setTimeout(() => {
                            multiplierText.remove();
                        }, 1000);
                    }
                    present.remove();
                    return;
                }

                present.style.left = `${posX}px`;
                present.style.top = `${posY}px`;
                present.style.transform = `rotate(${posX * 0.2}deg)`;

                requestAnimationFrame(animate);
            }

            animate();
        }

        dropButton.addEventListener('click', createPresent);
    </script>
</body>
</html>